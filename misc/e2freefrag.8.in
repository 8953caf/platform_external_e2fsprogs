.\" -*- nroff -*-
.TH E2FREEFRAG 8
.SH NAME
e2freefrag \- report free space fragmentation information
.SH SYNOPSIS
.B e2freefrag
[
.B \-c chunk_kb
]
[
.B \-h
]
.B filesys

.SH DESCRIPTION
.B e2freefrag
is used to report free space fragmentation on ext2/3/4 file systems.
.I filesys
is the filesystem device name (e.g.
.IR /dev/hdc1 ", " /dev/md0 ).
The
.B e2freefrag
program will scan the block bitmap information to check how many free blocks
are present as contiguous and aligned free space. The percentage of contiguous
free blocks of size and of alignment
.IR chunk_kb
is reported.  It also displays the minimum/maximum/average free chunk size in
the filesystem, along with a histogram of all free chunks.  This information
can be used to gauge the level of free space fragmentation in the filesystem.
.SH OPTIONS
.TP
.BI \-c " chunk_kb"
Desired size of chunk. It is specified in units of kilobytes (KB). If no
.I chunk_kb
is specified on the command line, then the default value is 1024KB.
.TP
.BI \-h
Print the usage of the program.
.SH EXAMPLE
# e2freefrag /dev/vgroot/lvhome
.br
Device: /dev/vgroot/lvhome
.br
Blocksize: 4096 bytes
.br
Total blocks: 5120710
.br
Free blocks: 831744 (16.2%)
.br
Chunk size: 1048576 bytes (256 blocks)
.br
Total chunks: 20003
.br
Free chunks: 2174 (10.9%)
.br

Min free chunk: 4 KB
.br
Max free chunk: 24576 KB
.br
Avg. free chunk: 340 KB
.br

HISTOGRAM OF FREE CHUNK SIZES:
.br
          Range         Free chunks
.br
    4K...    8K- :        2824
.br
    8K...   16K- :        1760
.br
   16K...   32K- :        1857
.br
   32K...   64K- :        1003
.br
   64K...  128K- :         616
.br
  128K...  256K- :         479
.br
  256K...  512K- :         302
.br
  512K... 1024K- :         238
.br
    1M...    2M- :         213
.br
    2M...    4M- :         173
.br
    4M...    8M- :         287
.br
    8M...   16M- :           4
.br
   16M...   32M- :           1
.SH AUTHOR
This version of e2freefrag was written by Rupesh Thakare, and modified by
Andreas Dilger <adilger@sun.com>, and Kalpak Shah.
.SH SEE ALSO
.IR debugfs (8),
.IR dumpe2fs (8),
.IR e2fsck (8)
